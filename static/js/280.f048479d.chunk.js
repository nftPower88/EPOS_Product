"use strict";(self.webpackChunkepos=self.webpackChunkepos||[]).push([[280],{5280:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var s=a(9439),r=a(2791),n=a(4165),l=a(5861),c=a(7689),u=a(1788),o=a(9434),i=a(1840),m=(a(9806),a(7561)),x=a(184),d=function(e){var t=e.switchRegister,a=e.role,u=(0,c.s0)(),d=(0,o.I0)(),p=((0,c.TH)().state||{from:{pathname:"/"}}).from,g=(0,o.v9)(m.gs),f=(0,r.useState)(""),b=(0,s.Z)(f,2),h=b[0],y=b[1],j=(0,r.useState)(!1),w=(0,s.Z)(j,2),v=w[0],N=w[1],k=(0,r.useState)(""),Z=(0,s.Z)(k,2),P=Z[0],C=Z[1],S=(0,r.useState)(!1),A=(0,s.Z)(S,2),E=A[0],D=A[1];(0,r.useEffect)((function(){g&&u("/")}),[g]),(0,r.useEffect)((function(){y(""),C("")}),[]);var W=function(e){var t={message:"",status:!1};if(0===e)0===h.length?(t.message="Please input email",t.status=!1,N(!0)):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(h)?0===P.length?(t.message="Please input password",t.status=!1,D(!0)):(t.message="",t.status=!0):(t.message="Invalid Email!",t.status=!1,N(!0));return t},I=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=W(0)).status){e.next=4;break}return d((0,i.jW)({message:t.message,status:"error"})),e.abrupt("return");case 4:d((0,m.jf)(h,P,a,p.pathname));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={message:"",status:!0},0===h.length?(t.message="Please input email",t.status=!1,N(!0)):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(h)||(t.message="Invalid Email!",t.status=!1,N(!0)),t.status){e.next=5;break}return d((0,i.jW)({message:t.message,status:"error"})),e.abrupt("return");case 5:d((0,m.gF)(h,a,p.pathname));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"w-full px-[3rem] text-xl",children:[(0,x.jsxs)("div",{className:"flex flex-col my-[1rem] mb-[2rem] mt-[2rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-2",children:"Email:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"email",value:h,onChange:function(e){y(e.target.value),N(!1)}}),(0,x.jsx)("p",{className:"".concat(v?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Email Address is not recognised. Please check again or register."})]}),(0,x.jsxs)("div",{className:"flex flex-col my-[1rem] mb-[0.1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-2",children:"Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:P,onChange:function(e){C(e.target.value),D(!1)}}),(0,x.jsx)("p",{className:"".concat(E?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Password incorrect/not found. Please check and try again."})]}),(0,x.jsx)("div",{className:"flex flex-col mb-[2rem]",children:(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 text-right underline italic cursor-pointer",onClick:function(){return G()},children:"Forgot Password?"})}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("button",{className:"w-[8rem] text-xl text-gray-100 text-left underline decoration-1 leading-[2.6rem]",onClick:function(){return t()},children:"Register"}),(0,x.jsx)("button",{className:"w-[8rem] text-xl leading-[2.6rem] rounded-[0.6rem] bg-[#D9D9D9] text-gray-800",onClick:function(){return I()},children:"Login"})]})]})},p=(a(1467),function(e){var t=e.switchLogin,a=e.role,d=e.currentGroup,p=e.setCurrentGroup,g=(0,c.s0)(),f=(0,o.I0)(),b=((0,o.v9)(m.mU),(0,o.v9)(m.xv)),h=(0,r.useState)(!1),y=(0,s.Z)(h,2),j=(y[0],y[1]),w=(0,r.useState)(""),v=(0,s.Z)(w,2),N=v[0],k=v[1],Z=(0,r.useState)(""),P=(0,s.Z)(Z,2),C=P[0],S=P[1],A=(0,r.useState)(""),E=(0,s.Z)(A,2),D=E[0],W=E[1],I=(0,r.useState)(""),G=(0,s.Z)(I,2),$=G[0],B=G[1],L=(0,r.useState)(""),R=(0,s.Z)(L,2),U=R[0],T=R[1],_=(0,r.useState)(""),F=(0,s.Z)(_,2),H=F[0],M=F[1],V=(0,r.useState)(""),q=(0,s.Z)(V,2),z=q[0],J=q[1],K=(0,r.useState)(""),O=(0,s.Z)(K,2),Q=O[0],X=(O[1],(0,r.useState)([])),Y=(0,s.Z)(X,2),ee=Y[0],te=(Y[1],(0,r.useState)([])),ae=(0,s.Z)(te,2),se=ae[0],re=(ae[1],(0,r.useState)([])),ne=(0,s.Z)(re,2),le=ne[0],ce=(ne[1],(0,r.useState)(!1)),ue=(0,s.Z)(ce,2),oe=ue[0],ie=ue[1],me=(0,r.useState)(!1),xe=(0,s.Z)(me,2),de=xe[0],pe=xe[1],ge=(0,r.useState)(!1),fe=(0,s.Z)(ge,2),be=fe[0],he=fe[1],ye=(0,r.useState)(!1),je=(0,s.Z)(ye,2),we=je[0],ve=je[1],Ne=(0,r.useState)(!1),ke=(0,s.Z)(Ne,2),Ze=ke[0],Pe=ke[1],Ce=(0,r.useState)(!1),Se=(0,s.Z)(Ce,2),Ae=Se[0],Ee=Se[1],De=(0,r.useState)(!1),We=(0,s.Z)(De,2),Ie=We[0],Ge=We[1],$e=(0,r.useState)(!1),Be=(0,s.Z)($e,2),Le=(Be[0],Be[1],(0,r.useState)(!1)),Re=(0,s.Z)(Le,2),Ue=(Re[0],Re[1]),Te=(0,r.useState)(!1),_e=(0,s.Z)(Te,2),Fe=(_e[0],_e[1]),He="merchant"===a?[(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Email:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"email",value:N,onChange:function(e){k(e.target.value),ie(!1)}}),(0,x.jsx)("p",{className:"".concat(oe?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Email format incorrect. Please check and try again."})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:C,onChange:function(e){S(e.target.value),pe(!1)}}),(0,x.jsx)("p",{className:"".concat(de?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Password must be alphanumeric, > 8 characters and contain one symbol."})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Confirm Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:D,onChange:function(e){W(e.target.value),he(!1)}}),(0,x.jsx)("p",{className:"".concat(be?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Passwords do not match"})]})]},1),(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Business Name:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:$,onChange:function(e){B(e.target.value),ve(!1)}}),(0,x.jsx)("p",{className:"".concat(we?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Business Name must be >2 characters"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Address:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:U,onChange:function(e){T(e.target.value),Pe(!1)}}),(0,x.jsx)("p",{className:"".concat(Ze?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Address must not be empty"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Postcode:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:H,onChange:function(e){M(e.target.value),Ee(!1)}}),(0,x.jsx)("p",{className:"".concat(Ae?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Postcode must not be empty"})]})]},2)]:[(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Email:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"email",value:N,onChange:function(e){k(e.target.value),ie(!1)}}),(0,x.jsx)("p",{className:"".concat(oe?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Email format incorrect. Please check and try again."})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:C,onChange:function(e){S(e.target.value),pe(!1)}}),(0,x.jsx)("p",{className:"".concat(de?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Password must be alphanumeric, > 8 characters and contain one symbol."})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Confirm Password:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"password",value:D,onChange:function(e){W(e.target.value),he(!1)}}),(0,x.jsx)("p",{className:"".concat(be?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Passwords do not match"})]})]},1),(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Name:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:$,onChange:function(e){B(e.target.value),ve(!1)}}),(0,x.jsx)("p",{className:"".concat(we?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Name must be >2 characters"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Address:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:U,onChange:function(e){T(e.target.value),Pe(!1)}}),(0,x.jsx)("p",{className:"".concat(Ze?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Address must not be empty"})]}),(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Postcode:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:H,onChange:function(e){M(e.target.value),Ee(!1)}}),(0,x.jsx)("p",{className:"".concat(Ae?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Postcode must not be empty"})]})]},2),(0,x.jsx)("div",{className:"w-full h-full",children:(0,x.jsxs)("div",{className:"flex flex-col mb-[0.5rem] mt-[1rem]",children:[(0,x.jsx)("label",{className:"block uppercase tracking-wide text-gray-100 mb-1",children:"Telephone:"}),(0,x.jsx)("input",{className:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-100 mr-3 py-1 px-2 leading-[2rem] focus:outline-none",type:"text",value:z,onChange:function(e){J(e.target.value),Ge(!1)}}),(0,x.jsx)("p",{className:"".concat(Ie?"text-red-400":"text-[#404040]"," text-sm select-none"),children:"Telephone must not be empty"})]})},3)],Me=He.reduce((function(e,t,a){return e[a]=(0,r.createRef)(),e}),{}),Ve=He.length,qe=function(e){p(e),Me[e].current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},ze=function(e){var t={message:"",status:!1};switch(e){case 0:0===N.length?(t.message="Please input email",t.status=!1,ie(!0)):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(N)?0===C.length?(t.message="Please input password",t.status=!1,pe(!0)):C.length<6?(t.message="Password must be > 5 characters",t.status=!1,pe(!0)):0===D.length?(t.message="Please type confirm password",t.status=!1,he(!0)):C!==D?(t.message="Not match password",t.status=!1,he(!0)):(t.message="",t.status=!0):(t.message="Invalid Email!",t.status=!1,ie(!0));break;case 1:0===$.length?(t.message="merchant"===a?"Please input businessname":"Please input username",t.status=!1,ve(!0)):0===U.length?(t.message="Please input address",t.status=!1,Pe(!0)):0===H.length?(t.message="Please input postcode",t.status=!1,Ee(!0)):(t.message="",t.status=!0);break;case 2:0===z.length?(t.message="Please input telephone",t.status=!1,Ge(!0)):(t.message="",t.status=!0)}return t},Je=function(){var e={message:"",status:!1};return 0===se.length||se.length<2?(Ue(!0),e.status=!1):0===le.length||!0===isNaN(le)||le.length<4||le.length>4?(Fe(!0),e.status=!1):(e.message="",e.status=!0),e},Ke=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t,s,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==d){e.next=13;break}if((t=ze(0)).status){e.next=5;break}return f((0,i.jW)({message:t.message,status:"error"})),e.abrupt("return");case 5:return e.next=7,u.W.checkUserByEmail(N,a);case 7:if(!e.sent.result){e.next=11;break}return f((0,i.jW)({message:"User with email: ".concat(N," already exists. Please check your email."),status:"error"})),e.abrupt("return");case 11:e.next=39;break;case 13:if(1!==d){e.next=30;break}if((s=ze(1)).status){e.next=18;break}return f((0,i.jW)({message:s.message,status:"error"})),e.abrupt("return");case 18:if("merchant"!==a){e.next=28;break}if(!(se.length>0||le.length>0)){e.next=27;break}if(Je().status){e.next=23;break}return e.abrupt("return");case 23:if(!Qe(se)){e.next=27;break}return f((0,i.jW)({message:"User with username: ".concat(se," already exists. Please retype your username."),status:"error"})),e.abrupt("return");case 27:f((0,m.a$)({businessname:$,address:U,postcode:H,email:N,password:C,role:a,userproxy:ee,username:se,userpin:le,token:void 0}));case 28:e.next=39;break;case 30:if(2!==d){e.next=39;break}if("customer"!==a){e.next=37;break}if((r=ze(2)).status){e.next=36;break}return f((0,i.jW)({message:r.message,status:"error"})),e.abrupt("return");case 36:f((0,m.a$)({businessname:$,address:U,postcode:H,email:N,password:C,role:a,userproxy:[],tel:z,notes:Q,username:"",userpin:"",token:void 0}));case 37:return j(!0),e.abrupt("return");case 39:d>=Ve-1||qe(d+1);case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0!==d&&qe(d-1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(e){return ee.filter((function(t){return t.username===e})).length>0};return(0,r.useEffect)((function(){b&&g("/")}),[b]),(0,x.jsxs)("div",{className:"w-full px-[3rem] text-xl",children:[(0,x.jsx)("div",{className:"relative w-full h-full",children:(0,x.jsx)("div",{className:"carousel w-full h-full",children:He.map((function(e,t){return(0,x.jsx)("div",{className:"w-full h-full flex-shrink-0",ref:Me[t],children:e},t)}))})}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("button",{className:"w-[5rem] text-xl text-gray-100 text-left underline decoration-1 leading-[2.6rem]",onClick:function(){return 0===d?t():Oe()},children:0===d?"Login":"Back"}),(0,x.jsx)("button",{className:"w-[8rem] text-xl leading-[2.6rem] rounded-[0.6rem] bg-[#D9D9D9] text-gray-800",onClick:function(){return Ke()},children:"Next"})]})]})}),g=function(){var e=(0,r.useState)(!1),t=(0,s.Z)(e,2),a=t[0],n=t[1],l=(0,r.useState)("merchant"),c=(0,s.Z)(l,2),u=c[0],i=c[1],m=(0,r.useState)(0),g=(0,s.Z)(m,2),f=g[0],b=g[1],h=((0,o.I0)(),function(e){f>0||i(e)});return(0,x.jsx)("div",{className:"w-full h-[100vh] flex justify-center items-center",children:(0,x.jsxs)("div",{className:"w-[50vw] max-w-[1000px] min-w-[380px] min-h-[460px] rounded-[1rem] border border-white",children:[(0,x.jsxs)("div",{className:"flex border-b border-gray-300",children:[(0,x.jsx)("button",{className:"w-full text-xl leading-[3.6rem] rounded-t-[1rem] ".concat("merchant"===u?"bg-[#D9D9D9] text-gray-800":"bg-transparent text-gray-100"),onClick:function(){return h("merchant")},children:"Merchants"}),(0,x.jsx)("button",{className:"w-full text-xl leading-[3.6rem] rounded-t-[1rem] ".concat("customer"===u?"bg-[#D9D9D9] text-gray-800":"bg-transparent text-gray-100"),onClick:function(){return h("customer")},children:"Customers"})]}),a?(0,x.jsx)(p,{switchLogin:function(){n(!1)},role:u,currentGroup:f,setCurrentGroup:b}):(0,x.jsx)(d,{switchRegister:function(){n(!0)},role:u,currentGroup:f,setCurrentGroup:b})]})})},f=function(){return(0,x.jsx)(g,{})}}}]);
//# sourceMappingURL=280.f048479d.chunk.js.map